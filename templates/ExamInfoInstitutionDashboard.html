<!-- ExamInfoInstitutionDashboard.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Info Dashboard</title>
    <!-- Tailwind CDN and font config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../static/css/index.css" />
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="https://unpkg.com/@material-tailwind/html@latest/styles/material-tailwind.css" />
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
    <!-- script -->
    <link rel="stylesheet" href="https://unpkg.com/@material-tailwind/html@latest/styles/material-tailwind.css" />
    <script src="https://unpkg.com/@material-tailwind/html@latest/scripts/script-name.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>

<body class="font-[Inter] bg-gray-50">
    <div class="flex flex-row h-screen w-[100vw]">
        <!-- Navbar section -->

        {% include 'InstitutionSideNavBar.html' %}

        <!-- Main Content Section -->
        <section id="main-content"
            class="flex-1 overflow-auto p-4 transition-all duration-300 ease-in-out text-gray-700 body-font mt-16">
            <div class="flex flex-col">

                <!-- Header Section -->
                <div class="container py-2 bg-gradient-to-r from-cyan-500">
                    <p class="ml-16 text-white font-medium text-lg">Exam Information</p>
                </div>

                <!-- Filters -->
                <div class="container pt-8 p-4">
                    <form id="filter-form"
                        class="flex flex-wrap gap-4 items-center w-full sm:w-auto">
                        <div class="w-72 min-w-[200px]">                            
                            <label class="block text-sm text-gray-600 mb-1">Year</label>
                            <select name="year"
                                class="h-full w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:ring-cyan-500 focus:border-cyan-500">
                                <option value="all">All</option>
                                {% for year in year_options %}
                                <option value="{{ year }}">{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="w-72 min-w-[200px]">
                            <label class="block text-sm text-gray-600 mb-1">Categories</label>
                            <select name="categories"
                                class="h-full w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:ring-cyan-500 focus:border-cyan-500">
                                <option value="all">All Categories</option>
                                {% for category in categories %}
                                <option value="{{ category.category_id }}">{{category.category_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </form>
                </div>

                <!--Exams Container -->
                <div id="exam-display-container" class="container pt-8 p-4">
                    {% include 'ExamFilteredInstitution.html'%}
                </div>

            </div>
        </section>
    </div>

    <script>
        // Filter accordion
        const filterForm = document.getElementById('filter-form');
        const examContainer = document.getElementById('exam-display-container');

        filterForm.addEventListener('change', () => {
            const formData = new FormData(filterForm);
            fetch('/filter_exams_inst', {
                method: 'POST',
                body: formData,
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text(); // Expecting the server to return HTML content
                })
                .then(html => {
                    examContainer.innerHTML = html;
                })
        });

    </script>


    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>

</body>

</html>